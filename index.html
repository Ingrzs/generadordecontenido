<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Contenido Falso</title>
    <link rel="stylesheet" href="index.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato&family=Lobster&family=Merriweather&family=Montserrat&family=Open+Sans&family=Oswald&family=Pacifico&family=Playfair+Display&family=Raleway&family=Roboto&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script type="importmap">
{
  "imports": {
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.20.0"
  }
}
</script>
</head>
<body>
    <div id="app-container">
        <header>
            <h1>Generador de Contenido</h1>
        </header>
        <main>
            <div class="tabs-container">
                <button id="tab-chat-generator" class="tab-btn active" data-tab="chat">Generador de Chats</button>
                <button id="tab-post-generator" class="tab-btn" data-tab="post">Generador de Frases</button>
                <button id="tab-image-post-generator" class="tab-btn" data-tab="image-post">Generador Posts con Imagen</button>
                <button id="tab-facebook-post-generator" class="tab-btn" data-tab="facebook-post">Generador Post Facebook</button>
                <button id="tab-text-enhancer" class="tab-btn" data-tab="text-enhancer">Mejorador de Texto</button>
                <button id="tab-stories" class="tab-btn" data-tab="stories">Historias</button>
                <button id="tab-meme-generator" class="tab-btn" data-tab="meme">Meme / Cómic</button>
                <button id="tab-graphic-post-generator" class="tab-btn" data-tab="graphic-post">Post Gráfico</button>
            </div>

            <div class="api-key-container">
                <div class="form-group hidden" id="api-key-group">
                    <label for="api-key">Tu Clave API de Google AI Studio</label>
                    <input type="password" id="api-key" placeholder="Introduce tu clave API aquí">
                    <p class="api-key-note">Tu clave se guarda localmente en tu navegador. <a href="https://aistudio.google.com/app/apikey" target="
_blank">Obtén tu clave aquí.</a></p>
                </div>
                <button type="button" id="change-api-key-btn" class="hidden">Usar otra Clave API</button>
            </div>

            <!-- Vista del Generador de Chats -->
            <div id="chat-generator-view">
                <form id="chat-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="persona1-desc">Descripción Persona 1 (Receptor)</label>
                            <input type="text" id="persona1-desc" placeholder="Opcional. Ej: Un padre preocupado">
                        </div>
                        <div class="form-group">
                            <label for="persona2-desc">Descripción Persona 2 (Emisor)</label>
                            <input type="text" id="persona2-desc" placeholder="Opcional. Ej: Un adolescente rebelde">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="topic">Tema de la Conversación</label>
                        <input type="text" id="topic" placeholder="Ej: Planear una fiesta sorpresa" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="background-upload">Fondo de Pantalla (Opcional)</label>
                            <label for="background-upload" class="file-upload-label">Subir Imagen de Fondo</label>
                            <input type="file" id="background-upload" class="file-upload-input" accept="image/*">
                        </div>
                        <div class="form-group">
                            <label>Marca de Agua (Opcional)</label>
                            <div class="watermark-controls">
                                <div class="watermark-tabs">
                                    <button type="button" id="watermark-text-tab" class="active" title="Usar texto como marca de agua">Texto</button>
                                    <button type="button" id="watermark-image-tab" title="Usar imagen como marca de agua">Imagen</button>
                                </div>
                                <div id="watermark-text-options">
                                    <input type="text" id="watermark-text" placeholder="Escribe tu texto">
                                    <input type="color" id="watermark-color" value="#000000" title="Color del texto">
                                </div>
                                <div id="watermark-image-options" class="hidden">
                                    <label for="watermark-upload" class="file-upload-label">Subir Imagen de Marca</label>
                                    <input type="file" id="watermark-upload" class="file-upload-input" accept="image/*">
                                </div>
                                <div class="watermark-slider">
                                    <label for="watermark-size">Tamaño:</label>
                                    <input type="range" id="watermark-size" min="10" max="100" value="30" title="Ajustar tamaño">
                                </div>
                                <div class="watermark-slider">
                                    <label for="watermark-opacity">Opacidad:</label>
                                    <input type="range" id="watermark-opacity" min="0" max="100" value="50" title="Ajustar opacidad">
                                </div>
                                <button type="button" id="remove-watermark-btn" title="Quitar la marca de agua">Quitar Marca</button>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tone">Tono</label>
                            <select id="tone">
                                <option value="polémico">Polémico</option>
                                <option value="sarcástico/irónico">Sarcástico/Irónico</option>
                                <option value="cómico/chistoso" selected>Cómico/Chistoso</option>
                                <option value="dramático">Dramático</option>
                                <option value="profesional/corporativo">Profesional/Corporativo</option>
                                <option value="tierno/cariñosose">Tierno/Cariñoso</option>
                                <option value="misterioso/suspenso">Misterioso/Suspenso</option>
                                <option value="filosófico/profundo">Filosófico/Profundo</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="style">Estilo de Escritura</label>
                            <select id="style">
                                <option value="informal con errores ortográficos de ambos lados">Informal (errores en ambos)</option>
                                <option value="informal, una persona con errores y la otra no">Informal (errores en uno)</option>
                                <option value="formal sin errores ortográficos">Formal (sin errores)</option>
                                <option value="usando abreviaturas y jerga de internet">Con jerga de internet</option>
                                <option value="como personas mayores usando la tecnología">Como personas mayores</option>
                                <option value="con respuestas muy cortas y cortantes">Cortante y directo</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="length">Longitud</label>
                            <select id="length">
                                <option value="corta (4-6 mensajes)" selected>Corta (4-6)</option>
                                <option value="mediana (8-12 mensajes)">Mediana (8-12)</option>
                                <option value="larga (15-20 mensajes)">Larga (15-20)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="emojis">Emojis</label>
                            <select id="emojis">
                                <option value="con emojis" selected>Con emojis</option>
                                <option value="sin emojis">Sin emojis</option>
                            </select>
                        </div>
                    </div>
                     <div class="form-row">
                         <div class="form-group">
                            <label for="starter">Quién Inicia la Conversación</label>
                            <select id="starter">
                                <option value="Persona 1">Persona 1</option>
                                <option value="Persona 2" selected>Persona 2</option>
                                <option value="aleatorio">Aleatorio</option>
                            </select>
                        </div>
                         <div class="form-group" style="flex: 1;"></div>
                    </div>

                    <div class="button-container">
                        <button type="submit" id="generate-btn">Generar Chat</button>
                    </div>
                </form>

                <div id="chat-window-container" style="position: relative; margin-top: 20px;">
                     <div id="chat-window">
                        <div id="chat-header">
                            <svg viewBox="0 0 24 24" width="24" height="24" class="header-icon back-arrow"><path fill="currentColor" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"></path></svg>
                            <div id="profile-pic-container">
                                <img id="profile-pic-img" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" alt="Foto de perfil">
                                <input type="file" id="profile-pic-upload" accept="image/*">
                                <svg id="default-profile-icon" viewBox="0 0 24 24" width="24" height="24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path></svg>
                            </div>
                            <div id="contact-info">
                                <span id="contact-name">Mamá</span>
                                <span id="contact-status">en línea</span>
                            </div>
                            <div id="header-actions">
                                <svg viewBox="0 0 24 24" width="24" height="24" class="header-icon"><path fill="currentColor" d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"></path></svg>
                                <svg viewBox="0 0 24 24" width="24" height="24" class="header-icon"><path fill="currentColor" d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"></path></svg>
                                <svg viewBox="0 0 24 24" width="24" height="24" class="header-icon"><path fill="currentColor" d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg>
                            </div>
                        </div>
                        <div id="chat-messages">
                            <div class="placeholder">Tu chat generado aparecerá aquí...</div>
                        </div>
                        <div id="watermark-overlay" class="hidden"></div>
                    </div>
                    <div id="loader" class="hidden">
                        <div class="spinner"></div>
                        <p>Generando conversación...</p>
                    </div>
                </div>

                 <div class="button-container" style="margin-top: 20px;">
                    <button type="button" id="download-full-btn" class="download-button hidden">Descargar Captura Completa</button>
                    <button type="button" id="download-chat-only-btn" class="download-button hidden">Descargar Solo Chat</button>
                </div>
                <input type="file" id="image-upload-input" class="file-upload-input" accept="image/*">
            </div>

            <!-- El resto de las vistas van aquí. Esta es solo la del chat. -->
            <!-- Vista del Generador de Posts (Texto) -->
            <div id="post-generator-view" class="hidden">
                 <div class="post-generator-layout">
                    <div class="post-controls">
                        <!-- Controles de plantilla y opciones -->
                        <h3>Plantilla</h3>
                        <div class="template-selector">
                            <button id="template-btn-facebook" class="template-btn active">
                                <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M14 13.5h2.5l1-4H14v-2c0-1.03 0-2 2-2h1.5V2.14c-.326-.043-1.557-.14-2.857-.14C11.928 2 10 3.657 10 6.7v2.8H7v4h3V22h4v-8.5z"></path></svg>
                                <span>Facebook</span>
                            </button>
                            <button id="template-btn-twitter" class="template-btn">
                                <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M22.46 6c-.77.35-1.6.58-2.46.67.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98-3.56-.18-6.73-1.89-8.84-4.48-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.22-1.95-.55v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"></path></svg>
                                <span>Twitter</span>
                            </button>
                        </div>
                        <div id="facebook-options-container">
                             <label class="checkbox-label"><input type="checkbox" id="toggle-verified-badge-facebook">Mostrar insignia verificada</label>
                        </div>
                        <div id="twitter-options-container" class="hidden">
                             <label class="checkbox-label"><input type="checkbox" id="toggle-verified-badge-twitter">Mostrar insignia verificada</label>
                        </div>
                         <h3>Alineación de Texto</h3>
                         <div id="text-align-selector" class="template-selector">
                            <button class="align-btn active" data-align="left" title="Alinear a la izquierda"><svg viewBox="0 0 24 24"><path d="M3 4h18v2H3V4zm0 5h12v2H3V9zm0 5h18v2H3v-2zm0 5h12v2H3v-2z"></path></svg></button>
                            <button class="align-btn" data-align="center" title="Centrar"><svg viewBox="0 0 24 24"><path d="M3 4h18v2H3V4zm3 5h12v2H6V9zm-3 5h18v2H3v-2zm3 5h12v2H6v-2z"></path></svg></button>
                            <button class="align-btn" data-align="right" title="Alinear a la derecha"><svg viewBox="0 0 24 24"><path d="M3 4h18v2H3V4zm6 5h12v2H9V9zm-6 5h18v2H3v-2zm6 5h12v2H9v-2z"></path></svg></button>
                            <button class="align-btn" data-align="justify" title="Justificar"><svg viewBox="0 0 24 24"><path d="M3 4h18v2H3V4zm0 5h18v2H3V9zm0 5h18v2H3v-2zm0 5h18v2H3v-2z"></path></svg></button>
                         </div>
                        <h3>Fuente</h3>
                        <div class="form-group">
                            <select id="post-font-selector">
                                 <option>Roboto</option><option>Open Sans</option><option>Lato</option><option>Montserrat</option><option>Oswald</option><option>Raleway</option><option>Merriweather</option><option>Playfair Display</option><option>Pacifico</option><option>Lobster</option>
                            </select>
                        </div>
                        <!-- Controles de modo (Manual/IA) -->
                        <h3>Modo de Creación</h3>
                        <div class="mode-selector">
                            <button id="mode-manual-btn" class="mode-btn active">Manual</button>
                            <button id="mode-ai-topic-btn" class="mode-btn">IA (Por Tema)</button>
                            <button id="mode-ai-trend-btn" class="mode-btn">IA (Tendencia)</button>
                        </div>
                        <div id="manual-input-container">
                             <div class="form-group">
                                <label for="post-texts-input">Frases (una por línea)</label>
                                <textarea id="post-texts-input" rows="8" placeholder="Escribe la primera frase aquí...&#10;Y la segunda aquí..."></textarea>
                            </div>
                        </div>
                        <div id="ai-input-container" class="hidden">
                            <div class="form-group" id="ai-topic-group">
                                <label for="ai-topic">Tema Principal</label>
                                <input type="text" id="ai-topic" placeholder="Ej: El desamor (o déjalo vacío para temas aleatorios)">
                            </div>
                            <div class="form-group hidden" id="ai-trend-group">
                                <label for="ai-trend-topic">Buscar Tendencia</label>
                                <input type="text" id="ai-trend-topic" placeholder="Ej: Estreno de nueva película, Evento deportivo, etc.">
                                <label for="ai-trend-date-filter" style="margin-top: 10px;">Periodo de Búsqueda</label>
                                <select id="ai-trend-date-filter">
                                    <option value="any">Cualquier Fecha</option>
                                    <option value="hour">Última Hora</option>
                                    <option value="today">Hoy (últimas 24h)</option>
                                    <option value="yesterday">Ayer</option>
                                    <option value="before_yesterday">Antier</option>
                                </select>
                            </div>
                            <h3>Tipo de Contenido</h3>
                            <div class="form-group">
                                <select id="post-content-type-selector">
                                    <option value="meme" selected>Meme</option>
                                    <option value="frase_opinion">Frase / Opinión</option>
                                    <option value="debate">Debate</option>
                                    <option value="debatible">Frase Debatible</option>
                                    <option value="emocional">Frase Emocional</option>
                                    <option value="mananera">Frase Mañanera</option>
                                    <option value="reflexion">Reflexión Nocturna</option>
                                    <option value="final">Frase Final</option>
                                    <option value="cristiana">Frase Cristiana</option>
                                    <option value="manipuladora">Frase Manipuladora / Sugestiva</option>
                                </select>
                            </div>
                             <div class="form-group">
                                <label for="ai-tone">Tono (Modificador)</label>
                                <select id="ai-tone">
                                     <optgroup label="🔥 TONOS COMBINADOS (Top 10)">
                                        <option value="sarcastic_humorous" selected>😏 Sarcástico + Humorístico</option>
                                        <option value="polemic_opinative">💣 Polémico + Opinativo</option>
                                        <option value="ironic_critical">🫣 Irónico + Crítico</option>
                                        <option value="emotional_reflective">💔 Emocional + Reflexivo</option>
                                        <option value="curious_emotional">😮 Curioso + Emocional</option>
                                        <option value="inspiring_critical">💅 Inspirador + Crítico</option>
                                        <option value="sarcastic_polemic">🤨 Sarcástico + Polémico</option>
                                        <option value="double_meaning_humor">😏 Doble sentido + Humor</option>
                                        <option value="curious_polemic">🧠 Curioso + Polémico</option>
                                        <option value="dramatic_emotional">💔 Dramático + Emocional</option>
                                    </optgroup>
                                    <optgroup label="🧠 TONOS PUROS (Individuales)">
                                        <option value="pure_sarcastic">🧠 Sarcástico</option>
                                        <option value="pure_polemic">💣 Polémico</option>
                                        <option value="pure_humorous">😜 Humorístico</option>
                                        <option value="pure_ironic">🤨 Irónico</option>
                                        <option value="pure_curious">🧪 Curioso</option>
                                        <option value="pure_emotional">💔 Emocional</option>
                                        <option value="pure_critical">🧨 Crítico</option>
                                        <option value="pure_motivational">✨ Motivacional</option>
                                        <option value="pure_double_meaning">🫣 Doble sentido</option>
                                        <option value="pure_dramatic">🎭 Dramático</option>
                                    </optgroup>
                                </select>
                            </div>
                             <div class="form-group">
                                <label for="ai-reaction">Objetivo (Reacción Buscada)</label>
                                <select id="ai-reaction">
                                    <option value="risa e identificación">Risa e Identificación</option>
                                    <option value="polémica y debate">Polémica y Debate</option>
                                    <option value="comentarios y participación">Comentarios y Participación</option>
                                    <option value="reflexión profunda">Reflexión Profunda</option>
                                    <option value="inspiración y motivación">Inspiración y Motivación</option>
                                </select>
                            </div>
                             <div class="form-group">
                                <label>Longitud Máxima</label>
                                <div id="ai-length-selector" class="mode-selector">
                                    <button class="mode-btn" data-length="muy corto">Muy Corto</button>
                                    <button class="mode-btn" data-length="corto">Corto</button>
                                    <button class="mode-btn active" data-length="medio">Medio</button>
                                </div>
                            </div>
                             <div class="form-group">
                                <label for="ai-quantity">Cantidad de Frases a Generar</label>
                                <input type="number" id="ai-quantity" value="3" min="1" max="10">
                            </div>
                        </div>

                        <button id="generate-posts-btn" class="generate-button">Generar Posts</button>
                    </div>
                    <div class="post-preview-area">
                        <h3>Vista Previa y Resultados</h3>
                        <div id="post-preview-container">
                            <div id="post-preview-template" class="post-template">
                                <div class="post-header">
                                    <div class="post-profile-pic">
                                        <img src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" alt="Foto de perfil">
                                        <input type="file" id="post-profile-pic-upload" class="file-upload-input" accept="image/*">
                                    </div>
                                    <div class="post-profile-info">
                                        <div class="post-name-wrapper">
                                            <span class="post-name">Nombre Apellido</span>
                                            <img class="twitter-verified-badge" src="https://i.ibb.co/7dLT9tSq/verificar.png" alt="Insignia de verificación de Twitter">
                                            <img class="facebook-verified-badge" src="https://i.ibb.co/V06BnDZ9/verificado.png" alt="Insignia de verificación de Facebook">
                                        </div>
                                        <span class="post-username">@usuario</span>
                                    </div>
                                </div>
                                <div class="post-body">
                                    <p class="post-text">Este es un ejemplo de cómo se verá el texto de tu publicación. Puedes editarlo directamente.</p>
                                </div>
                            </div>
                        </div>
                        <div id="post-results-area">
                            <div class="results-header hidden">
                                <h3>Resultados Generados</h3>
                                <button id="download-all-zip-btn" class="download-button">Descargar Todo (.zip)</button>
                            </div>
                            <div id="results-grid"></div>
                            <div id="post-generator-loader" class="hidden">
                                <div class="spinner"></div>
                                <p>Generando...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Vista del Generador de Posts con Imagen -->
            <div id="image-post-generator-view" class="hidden">
                 <div class="post-generator-layout">
                    <div class="post-controls">
                        <h3>Imagen Base</h3>
                         <label for="image-post-base-upload" class="file-upload-label">
                            <span>Subir / Pegar Imagen Base</span>
                            <span class="paste-instruction">Puedes pegar la imagen desde el portapapeles</span>
                         </label>
                        <input type="file" id="image-post-base-upload" class="file-upload-input" accept="image/*">
                        <div id="image-post-thumbnail-container" class="hidden">
                             <img id="image-post-thumbnail" src="" alt="Miniatura de imagen base">
                        </div>

                        <h3>Encabezado (Opcional)</h3>
                        <label class="checkbox-label"><input type="checkbox" id="toggle-image-post-header" checked>Mostrar encabezado</label>

                        <div id="image-post-header-options">
                             <div class="template-selector">
                                <button id="image-post-template-btn-facebook" class="template-btn active">
                                    <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M14 13.5h2.5l1-4H14v-2c0-1.03 0-2 2-2h1.5V2.14c-.326-.043-1.557-.14-2.857-.14C11.928 2 10 3.657 10 6.7v2.8H7v4h3V22h4v-8.5z"></path></svg>
                                    <span>Facebook</span>
                                </button>
                                <button id="image-post-template-btn-twitter" class="template-btn">
                                    <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M22.46 6c-.77.35-1.6.58-2.46.67.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98-3.56-.18-6.73-1.89-8.84-4.48-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.22-1.95-.55v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"></path></svg>
                                    <span>Twitter</span>
                                </button>
                            </div>
                            <div id="image-post-facebook-options">
                                 <label class="checkbox-label"><input type="checkbox" id="toggle-image-post-verified-facebook">Mostrar insignia verificada</label>
                            </div>
                            <div id="image-post-twitter-options" class="hidden">
                                 <label class="checkbox-label"><input type="checkbox" id="toggle-image-post-verified-twitter">Mostrar insignia verificada</label>
                            </div>
                            <label for="image-post-profile-pic-upload" class="file-upload-label" style="font-size: 0.9rem; padding: 8px;">Subir foto de perfil</label>
                            <input type="file" id="image-post-profile-pic-upload" class="file-upload-input" accept="image/*">
                        </div>

                        <h3>Estilo del Título</h3>
                        <div class="form-group">
                            <label for="image-post-font-selector">Fuente</label>
                            <select id="image-post-font-selector">
                                 <option>Roboto</option><option>Open Sans</option><option>Lato</option><option>Montserrat</option><option>Oswald</option><option>Raleway</option><option>Merriweather</option><option>Playfair Display</option><option>Pacifico</option><option>Lobster</option>
                            </select>
                        </div>
                        <div id="image-post-style-selector" class="template-selector">
                            <button class="style-btn" data-style="bold"><b>B</b></button>
                            <button class="style-btn" data-style="italic"><i>I</i></button>
                        </div>
                         <div id="image-post-text-align-selector" class="template-selector">
                            <button class="align-btn" data-align="left" title="Alinear a la izquierda"><svg viewBox="0 0 24 24"><path d="M3 4h18v2H3V4zm0 5h12v2H3V9zm0 5h18v2H3v-2zm0 5h12v2H3v-2z"></path></svg></button>
                            <button class="align-btn" data-align="center" title="Centrar"><svg viewBox="0 0 24 24"><path d="M3 4h18v2H3V4zm3 5h12v2H6V9zm-3 5h18v2H3v-2zm3 5h12v2H6v-2z"></path></svg></button>
                            <button class="align-btn" data-align="right" title="Alinear a la derecha"><svg viewBox="0 0 24 24"><path d="M3 4h18v2H3V4zm6 5h12v2H9V9zm-6 5h18v2H3v-2zm6 5h12v2H9v-2z"></path></svg></button>
                             <button class="align-btn" data-align="justify" title="Justificar"><svg viewBox="0 0 24 24"><path d="M3 4h18v2H3V4zm0 5h18v2H3V9zm0 5h18v2H3v-2zm0 5h18v2H3v-2z"></path></svg></button>
                         </div>
                        
                         <h3>Modo de Títulos</h3>
                         <div class="mode-selector">
                             <button id="image-post-mode-manual-btn" class="mode-btn active">Manual</button>
                             <button id="image-post-mode-ai-topic-btn" class="mode-btn">IA (por tema)</button>
                             <button id="image-post-mode-ai-image-btn" class="mode-btn" disabled>IA (Analizar Imagen)</button>
                             <button id="image-post-mode-ai-trend-btn" class="mode-btn" disabled>IA (Tendencia)</button>
                         </div>
                         <div id="image-post-manual-input-container">
                             <div class="form-group">
                                <label for="image-post-texts-input">Títulos (uno por línea)</label>
                                <textarea id="image-post-texts-input" rows="6" placeholder="Escribe el título del primer post...&#10;Y el segundo aquí..."></textarea>
                            </div>
                        </div>
                        <div id="image-post-ai-input-container" class="hidden">
                            <div class="form-group" id="image-post-ai-topic-group">
                                <label for="image-post-ai-topic">Tema Principal</label>
                                <input type="text" id="image-post-ai-topic" placeholder="Ej: Frases motivacionales para el lunes">
                            </div>
                             <div class="form-group hidden" id="image-post-ai-trend-group">
                                <label for="image-post-ai-trend-topic">Buscar Tendencia</label>
                                <input type="text" id="image-post-ai-trend-topic" placeholder="Ej: Estreno de nueva película, Evento deportivo, etc.">
                                <label for="image-post-ai-trend-date-filter" style="margin-top: 10px;">Periodo de Búsqueda</label>
                                <select id="image-post-ai-trend-date-filter">
                                    <option value="any">Cualquier Fecha</option>
                                    <option value="hour">Última Hora</option>
                                    <option value="today">Hoy (últimas 24h)</option>
                                    <option value="yesterday">Ayer</option>
                                    <option value="before_yesterday">Antier</option>
                                </select>
                            </div>
                            <h3>Tipo de Contenido</h3>
                            <div class="form-group">
                                <select id="image-post-content-type-selector">
                                    <option value="meme" selected>Meme</option>
                                    <option value="frase_opinion">Frase / Opinión</option>
                                    <option value="debate">Debate</option>
                                    <option value="debatible">Frase Debatible</option>
                                    <option value="emocional">Frase Emocional</option>
                                    <option value="mananera">Frase Mañanera</option>
                                    <option value="reflexion">Reflexión Nocturna</option>
                                    <option value="final">Frase Final</option>
                                    <option value="cristiana">Frase Cristiana</option>
                                    <option value="manipuladora">Frase Manipuladora / Sugestiva</option>
                                </select>
                            </div>
                             <div class="form-group">
                                <label for="image-post-ai-tone">Tono (Modificador)</label>
                                <select id="image-post-ai-tone">
                                     <optgroup label="🔥 TONOS COMBINADOS (Top 10)">
                                        <option value="sarcastic_humorous" selected>😏 Sarcástico + Humorístico</option>
                                        <option value="polemic_opinative">💣 Polémico + Opinativo</option>
                                        <option value="ironic_critical">🫣 Irónico + Crítico</option>
                                        <option value="emotional_reflective">💔 Emocional + Reflexivo</option>
                                        <option value="curious_emotional">😮 Curioso + Emocional</option>
                                        <option value="inspiring_critical">💅 Inspirador + Crítico</option>
                                        <option value="sarcastic_polemic">🤨 Sarcástico + Polémico</option>
                                        <option value="double_meaning_humor">😏 Doble sentido + Humor</option>
                                        <option value="curious_polemic">🧠 Curioso + Polémico</option>
                                        <option value="dramatic_emotional">💔 Dramático + Emocional</option>
                                    </optgroup>
                                    <optgroup label="🧠 TONOS PUROS (Individuales)">
                                        <option value="pure_sarcastic">🧠 Sarcástico</option>
                                        <option value="pure_polemic">💣 Polémico</option>
                                        <option value="pure_humorous">😜 Humorístico</option>
                                        <option value="pure_ironic">🤨 Irónico</option>
                                        <option value="pure_curious">🧪 Curioso</option>
                                        <option value="pure_emotional">💔 Emocional</option>
                                        <option value="pure_critical">🧨 Crítico</option>
                                        <option value="pure_motivational">✨ Motivacional</option>
                                        <option value="pure_double_meaning">🫣 Doble sentido</option>
                                        <option value="pure_dramatic">🎭 Dramático</option>
                                    </optgroup>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="image-post-ai-reaction">Objetivo (Reacción Buscada)</label>
                                <select id="image-post-ai-reaction">
                                    <option value="risa e identificación">Risa e Identificación</option>
                                    <option value="polémica y debate">Polémica y Debate</option>
                                    <option value="comentarios y participación">Comentarios y Participación</option>
                                    <option value="reflexión profunda">Reflexión Profunda</option>
                                    <option value="inspiración y motivación">Inspiración y Motivación</option>
                                </select>
                            </div>
                             <div class="form-group">
                                <label>Longitud Máxima</label>
                                <div id="image-post-ai-length-selector" class="mode-selector">
                                    <button class="mode-btn" data-length="muy corto">Muy Corto</button>
                                    <button class="mode-btn" data-length="corto">Corto</button>
                                    <button class="mode-btn active" data-length="medio">Medio</button>
                                </div>
                            </div>
                             <div class="form-group">
                                <label for="image-post-ai-quantity">Cantidad a Generar</label>
                                <input type="number" id="image-post-ai-quantity" value="3" min="1" max="10">
                            </div>
                        </div>
                        
                        <h3>Marca de Agua (Opcional)</h3>
                        <div class="watermark-controls">
                                <div class="watermark-tabs">
                                    <button type="button" id="image-post-watermark-text-tab" class="active">Texto</button>
                                    <button type="button" id="image-post-watermark-image-tab">Imagen</button>
                                </div>
                                <div id="image-post-watermark-text-options">
                                    <input type="text" id="image-post-watermark-text" placeholder="Escribe tu texto">
                                    <input type="color" id="image-post-watermark-color" value="#FFFFFF">
                                </div>
                                <div id="image-post-watermark-image-options" class="hidden">
                                    <label for="image-post-watermark-upload" class="file-upload-label">Subir Imagen</label>
                                    <input type="file" id="image-post-watermark-upload" class="file-upload-input" accept="image/*">
                                </div>
                                <div class="watermark-slider">
                                    <label for="image-post-watermark-size">Tamaño:</label>
                                    <input type="range" id="image-post-watermark-size" min="10" max="100" value="30">
                                </div>
                                <div class="watermark-slider">
                                    <label for="image-post-watermark-opacity">Opacidad:</label>
                                    <input type="range" id="image-post-watermark-opacity" min="0" max="100" value="70">
                                </div>
                                <button type="button" id="image-post-remove-watermark-btn">Quitar Marca</button>
                            </div>

                        <button id="generate-image-posts-btn" class="generate-button">Generar Posts con Imagen</button>
                    </div>
                    <div class="post-preview-area">
                        <h3>Vista Previa y Resultados</h3>
                        <div id="image-post-preview-container">
                            <div id="image-post-preview-template" class="post-template">
                                <div class="post-header">
                                    <div class="post-profile-pic">
                                        <img src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" alt="Foto de perfil">
                                    </div>
                                    <div class="post-profile-info">
                                        <div class="post-name-wrapper">
                                            <span class="post-name">Nombre Apellido</span>
                                            <img class="twitter-verified-badge" src="https://i.ibb.co/7dLT9tSq/verificar.png" alt="Insignia de verificación de Twitter">
                                            <img class="facebook-verified-badge" src="https://i.ibb.co/V06BnDZ9/verificado.png" alt="Insignia de verificación de Facebook">
                                        </div>
                                        <span class="post-username">@usuario</span>
                                    </div>
                                </div>
                                <div class="image-post-content">
                                    <p class="image-post-title">El título de tu publicación aparecerá aquí.</p>
                                    <div class="image-post-image-wrapper">
                                        <img class="image-post-base-img" src="data:image/png;base64,iVBORw0KGgoAAAANSUEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mN8/x8AAuMB8DtXNJsAAAAASUVORK5CYII=" alt="Imagen base del post">
                                    </div>
                                </div>
                                <div id="image-post-watermark-overlay" class="hidden"></div>
                            </div>
                        </div>

                         <div id="image-post-results-area">
                            <div class="results-header hidden">
                                <h3>Resultados Generados</h3>
                                <button id="image-post-download-all-zip-btn" class="download-button">Descargar Todo (.zip)</button>
                            </div>
                            <div id="image-post-results-grid"></div>
                            <div id="image-post-generator-loader" class="hidden">
                                <div class="spinner"></div>
                                <p>Generando...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

             <!-- Vista del Generador de Posts de Facebook -->
            <div id="facebook-post-generator-view" class="hidden">
                <div class="fb-post-layout">
                    <div class="fb-controls">
                        <div class="fb-form-group">
                            <label for="fb-person-name">Figura Pública o Tema</label>
                            <input type="text" id="fb-person-name" placeholder="Ej: Elon Musk, Apple, etc." required>
                        </div>
                        <div class="fb-form-group">
                            <label>Fecha de la Noticia (Opcional)</label>
                             <div class="fb-date-filters">
                                <select id="fb-year-select"></select>
                                <select id="fb-month-select"></select>
                                <select id="fb-day-select"></select>
                            </div>
                            <p id="fb-date-error" class="fb-date-error hidden">La fecha no puede ser futura.</p>
                        </div>
                        <div class="fb-form-group">
                             <label for="fb-tone-select">Tono del Post</label>
                             <select id="fb-tone-select">
                                <optgroup label="🔥 TONOS COMBINADOS (Top 10)">
                                    <option value="sarcastic_humorous" selected>😏 Sarcástico + Humorístico</option>
                                    <option value="polemic_opinative">💣 Polémico + Opinativo</option>
                                    <option value="ironic_critical">🫣 Irónico + Crítico</option>
                                    <option value="emotional_reflective">💔 Emocional + Reflexivo</option>
                                    <option value="curious_emotional">😮 Curioso + Emocional</option>
                                    <option value="inspiring_critical">💅 Inspirador + Crítico</option>
                                    <option value="sarcastic_polemic">🤨 Sarcástico + Polémico</option>
                                    <option value="double_meaning_humor">😏 Doble sentido + Humor</option>
                                    <option value="curious_polemic">🧠 Curioso + Polémico</option>
                                    <option value="dramatic_emotional">💔 Dramático + Emocional</option>
                                </optgroup>
                                <optgroup label="🧠 TONOS PUROS (Individuales)">
                                    <option value="pure_sarcastic">🧠 Sarcástico</option>
                                    <option value="pure_polemic">💣 Polémico</option>
                                    <option value="pure_humorous">😜 Humorístico</option>
                                    <option value="pure_ironic">🤨 Irónico</option>
                                    <option value="pure_curious">🧪 Curioso</option>
                                    <option value="pure_emotional">💔 Emocional</option>
                                    <option value="pure_critical">🧨 Crítico</option>
                                    <option value="pure_motivational">✨ Motivacional</option>
                                    <option value="pure_double_meaning">🫣 Doble sentido</option>
                                    <option value="pure_dramatic">🎭 Dramático</option>
                                </optgroup>
                            </select>
                        </div>
                         <div class="fb-form-group">
                             <label>Longitud del Post</label>
                             <div id="fb-length-selector" class="fb-segmented-control">
                                 <button data-length="corta">Corto</button>
                                 <button data-length="media" class="active">Medio</button>
                                 <button data-length="larga">Largo</button>
                             </div>
                         </div>
                         <button id="fb-generate-btn" disabled>Generar Post con Búsqueda en Google</button>
                    </div>
                    <div class="fb-results-area">
                         <div id="fb-initial-state">
                            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z" fill="currentColor"/></svg>
                             <h2>Resultados Potenciados por Google</h2>
                             <p>Introduce una figura pública o tema y la IA buscará en Google para generar un post de Facebook basado en información reciente y relevante.</p>
                         </div>
                        <div id="fb-results-container" class="hidden">
                            <div class="fb-post-card">
                                <div class="fb-card-header">
                                    <h3>Post Generado</h3>
                                     <button id="fb-copy-btn">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                        Copiar
                                    </button>
                                </div>
                                <p id="fb-generated-text"></p>
                            </div>
                            <div class="fb-sources-card">
                                <h3>Fuentes de Google</h3>
                                <ul id="fb-sources-list"></ul>
                            </div>
                        </div>
                         <div id="fb-loader" class="hidden">
                            <div class="spinner"></div>
                            <p>Buscando en Google y generando post...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Vista del Mejorador de Texto -->
            <div id="text-enhancer-view" class="hidden">
                <div class="te-layout">
                    <div class="te-controls">
                         <div class="te-form-group">
                            <label for="te-original-text">Texto a Mejorar</label>
                            <textarea id="te-original-text" placeholder="Pega o escribe tu texto aquí..."></textarea>
                        </div>
                        <div class="te-form-group">
                            <label for="te-tone-select">Cambiar Tono a</label>
                            <select id="te-tone-select">
                                <optgroup label="🔥 TONOS COMBINADOS (Top 10)">
                                    <option value="sarcastic_humorous" selected>😏 Sarcástico + Humorístico</option>
                                    <option value="polemic_opinative">💣 Polémico + Opinativo</option>
                                    <option value="ironic_critical">🫣 Irónico + Crítico</option>
                                    <option value="emotional_reflective">💔 Emocional + Reflexivo</option>
                                    <option value="curious_emotional">😮 Curioso + Emocional</option>
                                    <option value="inspiring_critical">💅 Inspirador + Crítico</option>
                                    <option value="sarcastic_polemic">🤨 Sarcástico + Polémico</option>
                                    <option value="double_meaning_humor">😏 Doble sentido + Humor</option>
                                    <option value="curious_polemic">🧠 Curioso + Polémico</option>
                                    <option value="dramatic_emotional">💔 Dramático + Emocional</option>
                                </optgroup>
                                <optgroup label="🧠 TONOS PUROS (Individuales)">
                                    <option value="pure_sarcastic">🧠 Sarcástico</option>
                                    <option value="pure_polemic">💣 Polémico</option>
                                    <option value="pure_humorous">😜 Humorístico</option>
                                    <option value="pure_ironic">🤨 Irónico</option>
                                    <option value="pure_curious">🧪 Curioso</option>
                                    <option value="pure_emotional">💔 Emocional</option>
                                    <option value="pure_critical">🧨 Crítico</option>
                                    <option value="pure_motivational">✨ Motivacional</option>
                                    <option value="pure_double_meaning">🫣 Doble sentido</option>
                                    <option value="pure_dramatic">🎭 Dramático</option>
                                </optgroup>
                            </select>
                        </div>
                        <div class="te-form-group">
                            <label>Ajustar Longitud</label>
                            <div id="te-length-selector" class="te-segmented-control">
                                <button data-length="corta">Corto</button>
                                <button data-length="media" class="active">Medio</button>
                                <button data-length="larga">Largo</button>
                            </div>
                        </div>
                        <button id="te-generate-btn" disabled>Mejorar Texto</button>
                    </div>
                    <div class="te-results-area">
                         <div id="te-initial-state">
                             <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2ZM18 20H6V4H13V9H18V20ZM8 12H16V14H8V12ZM8 16H16V18H8V16Z" fill="currentColor"/></svg>
                             <h2>Tu Asistente de Escritura</h2>
                            <p>Escribe un texto, elige el tono y la longitud deseada, y la IA lo reescribirá para ti, mejorando su impacto y claridad.</p>
                         </div>
                        <div id="te-results-container" class="hidden">
                            <div class="te-card">
                                <div class="te-card-header">
                                    <h3>Texto Mejorado</h3>
                                    <button id="te-copy-btn">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                        Copiar
                                    </button>
                                </div>
                                <p id="te-generated-text"></p>
                            </div>
                        </div>
                         <div id="te-loader" class="hidden">
                            <div class="spinner"></div>
                            <p>Mejorando texto...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Vista del Generador de Historias -->
            <div id="stories-generator-view" class="hidden">
                <div class="st-layout">
                    <div class="st-controls">
                        <div class="st-form-group">
                            <label for="st-topic">Tema de la Historia (o dejar en blanco)</label>
                            <input type="text" id="st-topic" placeholder="Ej: Mi peor primera cita, El día que adopté a mi perro...">
                        </div>
                        <div class="st-form-group">
                            <label>Modo de Creación</label>
                            <div id="st-mode-selector" class="st-segmented-control">
                                <button data-mode="inventada">Inventada</button>
                                <button data-mode="chisme" class="active">Confesión / Chisme</button>
                                <button data-mode="web">Basada en Web</button>
                            </div>
                        </div>
                        <div id="st-date-filter-group" class="st-form-group hidden">
                            <label for="st-date-filter">Periodo de Búsqueda (para Tendencias)</label>
                            <select id="st-date-filter">
                                <option value="any">Cualquier Fecha</option>
                                <option value="hour">Última Hora</option>
                                <option value="today">Hoy (últimas 24h)</option>
                                <option value="yesterday">Ayer</option>
                                <option value="before_yesterday">Antier</option>
                            </select>
                        </div>
                        <div class="st-form-group">
                            <label for="st-tone-select">Tono de la Narrativa</label>
                            <select id="st-tone-select">
                               <optgroup label="🔥 TONOS COMBINADOS (Top 10)">
                                    <option value="sarcastic_humorous">😏 Sarcástico + Humorístico</option>
                                    <option value="polemic_opinative">💣 Polémico + Opinativo</option>
                                    <option value="ironic_critical">🫣 Irónico + Crítico</option>
                                    <option value="emotional_reflective" selected>💔 Emocional + Reflexivo</option>
                                    <option value="curious_emotional">😮 Curioso + Emocional</option>
                                    <option value="inspiring_critical">💅 Inspirador + Crítico</option>
                                    <option value="sarcastic_polemic">🤨 Sarcástico + Polémico</option>
                                    <option value="double_meaning_humor">😏 Doble sentido + Humor</option>
                                    <option value="curious_polemic">🧠 Curioso + Polémico</option>
                                    <option value="dramatic_emotional">💔 Dramático + Emocional</option>
                                </optgroup>
                                <optgroup label="🧠 TONOS PUROS (Individuales)">
                                    <option value="pure_sarcastic">🧠 Sarcástico</option>
                                    <option value="pure_polemic">💣 Polémico</option>
                                    <option value="pure_humorous">😜 Humorístico</option>
                                    <option value="pure_ironic">🤨 Irónico</option>
                                    <option value="pure_curious">🧪 Curioso</option>
                                    <option value="pure_emotional">💔 Emocional</option>
                                    <option value="pure_critical">🧨 Crítico</option>
                                    <option value="pure_motivational">✨ Motivacional</option>
                                    <option value="pure_double_meaning">🫣 Doble sentido</option>
                                    <option value="pure_dramatic">🎭 Dramático</option>
                                </optgroup>
                            </select>
                        </div>
                        <div class="st-form-group">
                            <label for="st-reaction-select">Objetivo (Reacción Buscada)</label>
                            <select id="st-reaction-select">
                                <option value="generar empatía y ser compartida" selected>Empatía y Viralidad (que se comparta)</option>
                                <option value="provocar debate y comentarios">Debate y Comentarios</option>
                                <option value="inspirar y motivar a la acción">Inspiración y Motivación</option>
                                <option value="crear suspense y curiosidad">Suspense y Curiosidad</option>
                                <option value="hacer reír y entretener">Risa y Entretenimiento</option>
                                <option value="provocar una reflexión profunda">Reflexión Profunda</option>
                            </select>
                        </div>
                        <div class="st-form-group">
                            <label>Longitud de la Historia</label>
                            <div id="st-length-selector" class="st-segmented-control">
                                <button data-length="corta">Corta</button>
                                <button data-length="media" class="active">Media</button>
                                <button data-length="larga">Larga</button>
                            </div>
                        </div>
                        <button id="st-generate-btn">Generar Historia</button>
                    </div>
                    <div class="st-results-area">
                         <div id="st-initial-state">
                             <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2ZM18 20H6V4H13V9H18V20Z" fill="currentColor"/></svg>
                             <h2>Tu Fábrica de Relatos</h2>
                            <p>Escribe un tema y la IA creará una historia anónima. Elige "Inventada" para una creación original o "Basada en Web" para un relato inspirado en hechos reales.</p>
                         </div>
                        <div id="st-results-container" class="hidden">
                            <div class="st-card">
                                <div class="st-card-header">
                                    <h3>Historia Generada</h3>
                                    <button id="st-copy-btn">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                        Copiar
                                    </button>
                                </div>
                                <p id="st-generated-text"></p>
                            </div>
                        </div>
                         <div id="st-loader" class="hidden">
                            <div class="spinner"></div>
                            <p>Escribiendo historia...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Vista del Generador de Memes -->
            <div id="meme-generator-view" class="hidden">
                <div class="meme-generator-layout">
                    <div class="meme-controls">
                        <h3>Diseño</h3>
                        <div id="meme-layout-selector" class="grid-selector">
                           <button class="layout-btn" data-layout="1f" title="1 Panel">1</button>
                           <button class="layout-btn" data-layout="2v" title="2 Paneles (Vertical)">2v</button>
                           <button class="layout-btn" data-layout="2h" title="2 Paneles (Horizontal)">2h</button>
                           <button class="layout-btn" data-layout="3v" title="3 Paneles (Vertical)">3v</button>
                           <button class="layout-btn" data-layout="4g" title="4 Paneles (Cuadrícula)">4g</button>
                           <button class="layout-btn" data-layout="6g" title="6 Paneles (Cuadrícula)">6g</button>
                        </div>
                        <input type="file" id="meme-image-upload" class="file-upload-input" accept="image/*">
                        <div class="form-group">
                            <label for="meme-gutter-slider">Espaciado: <span id="meme-gutter-value">5</span>px</label>
                            <input type="range" id="meme-gutter-slider" min="0" max="30" value="5">
                        </div>
                         <div class="form-group">
                            <label for="meme-bg-color">Color de Fondo</label>
                            <input type="color" id="meme-bg-color" value="#FFFFFF">
                        </div>

                        <h3>Textos</h3>
                        <div id="meme-text-inputs-container">
                            <button id="add-meme-text-btn">Añadir Texto</button>
                        </div>
                         <div class="form-group">
                            <label for="meme-font-selector">Fuente</label>
                            <select id="meme-font-selector">
                                 <option>Impact</option><option>Arial Black</option><option>Comic Sans MS</option><option>Oswald</option><option>Montserrat</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="meme-text-color">Color</label>
                                <input type="color" id="meme-text-color" value="#FFFFFF">
                            </div>
                            <div class="form-group">
                                <label for="meme-border-color">Borde</label>
                                <input type="color" id="meme-border-color" value="#000000">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="meme-font-size-slider">Tamaño: <span id="meme-font-size-value">40</span>px</label>
                            <input type="range" id="meme-font-size-slider" min="10" max="120" value="40">
                        </div>
                        <div class="form-group">
                            <label for="meme-border-thickness">Grosor Borde: <span id="meme-border-thickness-value">2</span>px</label>
                            <input type="range" id="meme-border-thickness" min="0" max="10" value="2">
                        </div>
                        <h3>Marca de Agua (Opcional)</h3>
                        <div class="watermark-controls">
                            <div class="watermark-tabs">
                                <button type="button" id="meme-watermark-text-tab" class="active">Texto</button>
                                <button type="button" id="meme-watermark-image-tab">Imagen</button>
                            </div>
                            <div id="meme-watermark-text-options">
                                <input type="text" id="meme-watermark-text" placeholder="TuMarcaDeAgua">
                                <input type="color" id="meme-watermark-color" value="#FFFFFF">
                            </div>
                            <div id="meme-watermark-image-options" class="hidden">
                                <label for="meme-watermark-upload" class="file-upload-label">Subir Imagen</label>
                                <input type="file" id="meme-watermark-upload" class="file-upload-input" accept="image/*">
                            </div>
                            <div class="watermark-slider">
                                <label for="meme-watermark-size">Tamaño:</label>
                                <input type="range" id="meme-watermark-size" min="10" max="100" value="20">
                            </div>
                            <div class="watermark-slider">
                                <label for="meme-watermark-opacity">Opacidad:</label>
                                <input type="range" id="meme-watermark-opacity" min="0" max="100" value="70">
                            </div>
                            <button type="button" id="meme-remove-watermark-btn">Quitar</button>
                        </div>
                    </div>
                    <div class="meme-preview-area">
                        <div id="meme-capture-wrapper">
                             <div id="meme-canvas-container"></div>
                             <div id="meme-watermark-overlay" class="hidden"></div>
                        </div>
                        <button id="generate-meme-btn">Descargar Meme</button>
                    </div>
                </div>
            </div>

            <!-- Vista del Generador de Posts Gráficos -->
            <div id="graphic-post-generator-view" class="hidden">
                <div class="graphic-post-layout">
                     <div class="graphic-post-controls">
                        <h3>Diseño</h3>
                        <div id="gp-layout-selector" class="grid-selector">
                           <button class="layout-btn" data-layout="1" title="1 Panel">1</button>
                           <button class="layout-btn" data-layout="2v" title="2 Paneles (Vertical)">2v</button>
                           <button class="layout-btn" data-layout="2h" title="2 Paneles (Horizontal)">2h</button>
                           <button class="layout-btn" data-layout="3v" title="3 Paneles (Vertical)">3v</button>
                           <button class="layout-btn" data-layout="3h" title="3 Paneles (Horizontal)">3h</button>
                        </div>
                        <input type="file" id="gp-bg-image-upload" class="file-upload-input" accept="image/*">
                        <div class="form-group">
                            <label for="gp-gutter-slider">Espaciado: <span id="gp-gutter-value">5</span>px</label>
                            <input type="range" id="gp-gutter-slider" min="0" max="30" value="5">
                        </div>
                         <div class="form-group">
                            <label for="gp-bg-color">Color de Fondo</label>
                            <input type="color" id="gp-bg-color" value="#FFFFFF">
                        </div>

                        <h3>Relación de Aspecto</h3>
                        <div id="gp-aspect-ratio-selector" class="template-selector">
                            <button class="layout-btn active" data-ratio="1:1">Cuadrado (1:1)</button>
                            <button class="layout-btn" data-ratio="9:16">Historia (9:16)</button>
                        </div>
                        
                         <h3>Textos</h3>
                        <button id="gp-add-text-btn">Añadir Texto</button>
                         <div class="form-group">
                            <label for="gp-font-selector">Fuente</label>
                            <select id="gp-font-selector">
                                 <option>Impact</option><option>Arial Black</option><option>Comic Sans MS</option><option>Oswald</option><option>Montserrat</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="gp-text-color">Color</label>
                                <input type="color" id="gp-text-color" value="#FFFFFF">
                            </div>
                            <div class="form-group">
                                <label for="gp-border-color">Borde</label>
                                <input type="color" id="gp-border-color" value="#000000">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="gp-font-size-slider">Tamaño: <span id="gp-font-size-value">40</span>px</label>
                            <input type="range" id="gp-font-size-slider" min="10" max="120" value="40">
                        </div>
                        <div class="form-group">
                            <label for="gp-border-thickness">Grosor Borde: <span id="gp-border-thickness-value">2</span>px</label>
                            <input type="range" id="gp-border-thickness" min="0" max="10" value="2">
                        </div>

                        <h3>Capas / Overlays</h3>
                        <div class="form-row" style="gap: 10px;">
                            <button id="gp-add-image-layer-btn" class="template-btn" style="flex: 1;">Añadir Imagen</button>
                            <button id="gp-add-circle-layer-btn" class="template-btn" style="flex: 1;">Añadir Círculo</button>
                        </div>
                        <input type="file" id="gp-overlay-image-upload" class="file-upload-input" accept="image/*">

                        <div id="gp-circle-border-controls" class="hidden">
                            <h3>Borde de Círculo</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="gp-circle-border-color">Color</label>
                                    <input type="color" id="gp-circle-border-color" value="#000000">
                                </div>
                                <div class="form-group">
                                    <label for="gp-circle-border-width">Grosor: <span id="gp-circle-border-width-value">0</span>px</label>
                                    <input type="range" id="gp-circle-border-width" min="0" max="20" value="0">
                                </div>
                            </div>
                        </div>

                         <h3>Marca de Agua (Opcional)</h3>
                        <div class="watermark-controls">
                            <div class="watermark-tabs">
                                <button type="button" id="gp-watermark-text-tab" class="active">Texto</button>
                                <button type="button" id="gp-watermark-image-tab">Imagen</button>
                            </div>
                            <div id="gp-watermark-text-options">
                                <input type="text" id="gp-watermark-text" placeholder="TuMarcaDeAgua">
                                <input type="color" id="gp-watermark-color" value="#FFFFFF">
                            </div>
                            <div id="gp-watermark-image-options" class="hidden">
                                <label for="gp-watermark-upload" class="file-upload-label">Subir Imagen</label>
                                <input type="file" id="gp-watermark-upload" class="file-upload-input" accept="image/*">
                            </div>
                            <div class="watermark-slider">
                                <label for="gp-watermark-size">Tamaño:</label>
                                <input type="range" id="gp-watermark-size" min="10" max="100" value="20">
                            </div>
                            <div class="watermark-slider">
                                <label for="gp-watermark-opacity">Opacidad:</label>
                                <input type="range" id="gp-watermark-opacity" min="0" max="100" value="70">
                            </div>
                            <button type="button" id="gp-remove-watermark-btn">Quitar</button>
                        </div>
                         
                         <button id="gp-generate-btn" style="margin-top: auto;">Descargar Post</button>
                    </div>
                    <div class="graphic-post-preview-area">
                        <h3>Lienzo de Trabajo</h3>
                        <div id="gp-capture-wrapper">
                            <div id="gp-canvas-container">
                                <!-- Panels will be generated here -->
                            </div>
                             <div id="gp-watermark-overlay" class="hidden"></div>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>
    <script type="module" src="index.js"></script>
</body>
</html>
